<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.example.dao.SubjectDAO">

    <resultMap id="subject_student" type="Subject">
        <id column="id" property="id"></id>
        <result column="name" property="name"></result>
        <result column="grade" property="grade"></result>

        <collection property="students" ofType="Student2">
            <id column="stu_id" property="id"></id>
            <result column="stu_name" property="name"></result>
            <result column="sex" property="sex"></result>
        </collection>
    </resultMap>

    <select id="querySubjectById" resultMap="subject_student">
        select t_subjects.id,t_subjects.name,t_subjects.grade,
        t_student2.id stu_id,t_student2.name stu_name,t_student2.sex
        from t_subjects join t_stu_sub
        on t_subjects.id = t_stu_sub.subject_id
        join t_student2
        on t_stu_sub.student_id = t_student2.id
        where t_subjects.id=#{id}
    </select>


</mapper>